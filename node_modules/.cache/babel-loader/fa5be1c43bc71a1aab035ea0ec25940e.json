{"ast":null,"code":"import jwtDecode from 'jwt-decode';\nimport { getAuthData } from './storage';\nexport const getTokenData = () => {\n  const token = getAuthData().access_token;\n  try {\n    return jwtDecode(token);\n  } catch (error) {\n    return undefined;\n  }\n};\nexport const isAuthenticated = () => {\n  const tokenData = getTokenData();\n  return tokenData !== undefined && (tokenData === null || tokenData === void 0 ? void 0 : tokenData.exp) * 1000 > Date.now();\n};\nexport const hasAnyRoles = roles => {\n  const tokenData = getTokenData();\n  if (tokenData !== undefined) {\n    return roles.some(role => tokenData.authorities.includes(role));\n  }\n  return false;\n};","map":{"version":3,"names":["jwtDecode","getAuthData","getTokenData","token","access_token","error","undefined","isAuthenticated","tokenData","exp","Date","now","hasAnyRoles","roles","some","role","authorities","includes"],"sources":["C:/Users/Marcelo Machado/dsCatalog/CatalogoDeProdutos/frontend/catalogodeprodutos/src/util/auth.ts"],"sourcesContent":["import jwtDecode from 'jwt-decode';\r\nimport { getAuthData } from './storage';\r\n\r\nexport type Role = 'ROLE_OPERATOR' | 'ROLE_ADMIN';\r\n\r\nexport type TokenData = {\r\n  exp: number;\r\n  user_name: string;\r\n  authorities: Role[];\r\n};\r\n\r\nexport const getTokenData = (): TokenData | undefined => {\r\n  const token = getAuthData().access_token;\r\n  try {\r\n    return jwtDecode(token) as TokenData;\r\n  } catch (error) {\r\n    return undefined;\r\n  }\r\n};\r\n\r\nexport const isAuthenticated = (): boolean => {\r\n  const tokenData = getTokenData();\r\n  return tokenData !== undefined && tokenData?.exp * 1000 > Date.now();\r\n};\r\n\r\nexport const hasAnyRoles = (roles: Role[]): boolean => {\r\n  const tokenData = getTokenData();\r\n\r\n  if (tokenData !== undefined) {\r\n    return roles.some((role) => tokenData.authorities.includes(role));\r\n  }\r\n\r\n  return false;\r\n};\r\n"],"mappings":"AAAA,OAAOA,SAAS,MAAM,YAAY;AAClC,SAASC,WAAW,QAAQ,WAAW;AAUvC,OAAO,MAAMC,YAAY,GAAGA,CAAA,KAA6B;EACvD,MAAMC,KAAK,GAAGF,WAAW,CAAC,CAAC,CAACG,YAAY;EACxC,IAAI;IACF,OAAOJ,SAAS,CAACG,KAAK,CAAC;EACzB,CAAC,CAAC,OAAOE,KAAK,EAAE;IACd,OAAOC,SAAS;EAClB;AACF,CAAC;AAED,OAAO,MAAMC,eAAe,GAAGA,CAAA,KAAe;EAC5C,MAAMC,SAAS,GAAGN,YAAY,CAAC,CAAC;EAChC,OAAOM,SAAS,KAAKF,SAAS,IAAI,CAAAE,SAAS,aAATA,SAAS,uBAATA,SAAS,CAAEC,GAAG,IAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;AACtE,CAAC;AAED,OAAO,MAAMC,WAAW,GAAIC,KAAa,IAAc;EACrD,MAAML,SAAS,GAAGN,YAAY,CAAC,CAAC;EAEhC,IAAIM,SAAS,KAAKF,SAAS,EAAE;IAC3B,OAAOO,KAAK,CAACC,IAAI,CAAEC,IAAI,IAAKP,SAAS,CAACQ,WAAW,CAACC,QAAQ,CAACF,IAAI,CAAC,CAAC;EACnE;EAEA,OAAO,KAAK;AACd,CAAC"},"metadata":{},"sourceType":"module"}