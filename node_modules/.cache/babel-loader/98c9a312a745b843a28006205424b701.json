{"ast":null,"code":"var _process$env$REACT_AP, _process$env$REACT_AP2, _process$env$REACT_AP3;\nimport axios from 'axios';\nexport const BASE_URL = (_process$env$REACT_AP = process.env.REACT_APP_BACKEND_URL) !== null && _process$env$REACT_AP !== void 0 ? _process$env$REACT_AP : 'http://localhost:8080';\nexport const CLIENT_ID = (_process$env$REACT_AP2 = process.env.REACT_APP_CLIENT_ID) !== null && _process$env$REACT_AP2 !== void 0 ? _process$env$REACT_AP2 : 'dscatalog';\nexport const CLIENT_SECRET = (_process$env$REACT_AP3 = process.env.REACT_APP_CLIENT_SECRET) !== null && _process$env$REACT_AP3 !== void 0 ? _process$env$REACT_AP3 : 'dscatalog123';\nconst basicHeader = () => {\n  return 'Basic ' + btoa(`${CLIENT_ID}:${CLIENT_SECRET}`);\n};\nexport const requestBackendLogin = async loginData => {\n  const headers = {\n    'Content-Type': 'application/x-www-form-urlencoded',\n    Authorization: basicHeader()\n  };\n  const data = new URLSearchParams();\n  data.append('username', loginData.username);\n  data.append('password', loginData.password);\n  data.append('grant_type', 'password');\n  try {\n    console.log('Enviando dados:', data.toString());\n    const response = await axios.post('/oauth/token', data.toString(), {\n      baseURL: BASE_URL,\n      headers\n    });\n    console.log('Resposta do servidor:', response.data);\n    return response;\n  } catch (error) {\n    var _error$response;\n    console.error('Erro na requisição:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","BASE_URL","_process$env$REACT_AP","process","env","REACT_APP_BACKEND_URL","CLIENT_ID","_process$env$REACT_AP2","REACT_APP_CLIENT_ID","CLIENT_SECRET","_process$env$REACT_AP3","REACT_APP_CLIENT_SECRET","basicHeader","btoa","requestBackendLogin","loginData","headers","Authorization","data","URLSearchParams","append","username","password","console","log","toString","response","post","baseURL","error","_error$response","message"],"sources":["C:/Users/Marcelo Machado/dsCatalog/CatalogoDeProdutos/frontend/catalogodeprodutos/src/util/requests.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nexport const BASE_URL =\r\n  process.env.REACT_APP_BACKEND_URL ?? 'http://localhost:8080';\r\n\r\nexport const CLIENT_ID = process.env.REACT_APP_CLIENT_ID ?? 'dscatalog';\r\n\r\nexport const CLIENT_SECRET =\r\n  process.env.REACT_APP_CLIENT_SECRET ?? 'dscatalog123';\r\n\r\nconst basicHeader = () => {\r\n  return 'Basic ' + btoa(`${CLIENT_ID}:${CLIENT_SECRET}`);\r\n};\r\n\r\ntype LoginData = {\r\n  username: string;\r\n  password: string;\r\n};\r\n\r\nexport const requestBackendLogin = async (loginData: LoginData) => {\r\n  const headers = {\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n    Authorization: basicHeader(),\r\n  };\r\n\r\n  const data = new URLSearchParams();\r\n  data.append('username', loginData.username);\r\n  data.append('password', loginData.password);\r\n  data.append('grant_type', 'password');\r\n\r\n  try {\r\n    console.log('Enviando dados:', data.toString());\r\n    const response = await axios.post('/oauth/token', data.toString(), {\r\n      baseURL: BASE_URL,\r\n      headers,\r\n    });\r\n    console.log('Resposta do servidor:', response.data);\r\n    return response;\r\n  } catch (error) {\r\n    console.error('Erro na requisição:', error.response?.data || error.message);\r\n    throw error;\r\n  }\r\n};\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,QAAQ,IAAAC,qBAAA,GACnBC,OAAO,CAACC,GAAG,CAACC,qBAAqB,cAAAH,qBAAA,cAAAA,qBAAA,GAAI,uBAAuB;AAE9D,OAAO,MAAMI,SAAS,IAAAC,sBAAA,GAAGJ,OAAO,CAACC,GAAG,CAACI,mBAAmB,cAAAD,sBAAA,cAAAA,sBAAA,GAAI,WAAW;AAEvE,OAAO,MAAME,aAAa,IAAAC,sBAAA,GACxBP,OAAO,CAACC,GAAG,CAACO,uBAAuB,cAAAD,sBAAA,cAAAA,sBAAA,GAAI,cAAc;AAEvD,MAAME,WAAW,GAAGA,CAAA,KAAM;EACxB,OAAO,QAAQ,GAAGC,IAAI,CAAE,GAAEP,SAAU,IAAGG,aAAc,EAAC,CAAC;AACzD,CAAC;AAOD,OAAO,MAAMK,mBAAmB,GAAG,MAAOC,SAAoB,IAAK;EACjE,MAAMC,OAAO,GAAG;IACd,cAAc,EAAE,mCAAmC;IACnDC,aAAa,EAAEL,WAAW,CAAC;EAC7B,CAAC;EAED,MAAMM,IAAI,GAAG,IAAIC,eAAe,CAAC,CAAC;EAClCD,IAAI,CAACE,MAAM,CAAC,UAAU,EAAEL,SAAS,CAACM,QAAQ,CAAC;EAC3CH,IAAI,CAACE,MAAM,CAAC,UAAU,EAAEL,SAAS,CAACO,QAAQ,CAAC;EAC3CJ,IAAI,CAACE,MAAM,CAAC,YAAY,EAAE,UAAU,CAAC;EAErC,IAAI;IACFG,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEN,IAAI,CAACO,QAAQ,CAAC,CAAC,CAAC;IAC/C,MAAMC,QAAQ,GAAG,MAAM1B,KAAK,CAAC2B,IAAI,CAAC,cAAc,EAAET,IAAI,CAACO,QAAQ,CAAC,CAAC,EAAE;MACjEG,OAAO,EAAE3B,QAAQ;MACjBe;IACF,CAAC,CAAC;IACFO,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEE,QAAQ,CAACR,IAAI,CAAC;IACnD,OAAOQ,QAAQ;EACjB,CAAC,CAAC,OAAOG,KAAK,EAAE;IAAA,IAAAC,eAAA;IACdP,OAAO,CAACM,KAAK,CAAC,qBAAqB,EAAE,EAAAC,eAAA,GAAAD,KAAK,CAACH,QAAQ,cAAAI,eAAA,uBAAdA,eAAA,CAAgBZ,IAAI,KAAIW,KAAK,CAACE,OAAO,CAAC;IAC3E,MAAMF,KAAK;EACb;AACF,CAAC"},"metadata":{},"sourceType":"module"}