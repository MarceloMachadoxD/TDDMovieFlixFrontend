{"ast":null,"code":"var _process$env$REACT_AP, _process$env$REACT_AP2, _process$env$REACT_AP3;\nimport axios from 'axios';\nimport qs from 'qs';\nexport const BASE_URL = (_process$env$REACT_AP = process.env.REACT_APP_BACKEND_URL) !== null && _process$env$REACT_AP !== void 0 ? _process$env$REACT_AP : 'http://localhost:8080';\nexport const CLIENT_ID = (_process$env$REACT_AP2 = process.env.REACT_APP_CLIENT_ID) !== null && _process$env$REACT_AP2 !== void 0 ? _process$env$REACT_AP2 : 'dscatalog';\nexport const CLIENT_SECRET = (_process$env$REACT_AP3 = process.env.REACT_APP_CLIENT_SECRET) !== null && _process$env$REACT_AP3 !== void 0 ? _process$env$REACT_AP3 : 'dscatalog123';\nconst basicHeader = () => {\n  return `Basic ${btoa(`${CLIENT_ID}:${CLIENT_SECRET}`)}`;\n};\nexport const requestBackendLogin = loginData => {\n  const headers = {\n    'Content-Type': 'application/x-www-form-urlencoded',\n    Authorization: basicHeader()\n  };\n  const data = qs.stringify({\n    ...loginData,\n    grant_type: 'password'\n  });\n  return axios({\n    method: 'POST',\n    baseURL: BASE_URL,\n    url: '/oauth/token',\n    data,\n    headers\n  });\n};\nexport const saveAuthData = loginResponse => {\n  localStorage.setItem('authData', qd.stringify(loginResponse));\n};","map":{"version":3,"names":["axios","qs","BASE_URL","_process$env$REACT_AP","process","env","REACT_APP_BACKEND_URL","CLIENT_ID","_process$env$REACT_AP2","REACT_APP_CLIENT_ID","CLIENT_SECRET","_process$env$REACT_AP3","REACT_APP_CLIENT_SECRET","basicHeader","btoa","requestBackendLogin","loginData","headers","Authorization","data","stringify","grant_type","method","baseURL","url","saveAuthData","loginResponse","localStorage","setItem","qd"],"sources":["C:/Users/Marcelo Machado/dsCatalog/CatalogoDeProdutos/frontend/catalogodeprodutos/src/util/requests.ts"],"sourcesContent":["import axios from 'axios';\r\nimport qs from 'qs';\r\n\r\ntype LoginResponse = {\r\n  access_token: string;\r\n  token_type: string;\r\n  refresh_token: string;\r\n  expires_in: number;\r\n  scope: string;\r\n  userFirstName: string;\r\n  userId: number;\r\n};\r\n\r\nexport const BASE_URL =\r\n  process.env.REACT_APP_BACKEND_URL ?? 'http://localhost:8080';\r\n\r\nexport const CLIENT_ID = process.env.REACT_APP_CLIENT_ID ?? 'dscatalog';\r\n\r\nexport const CLIENT_SECRET =\r\n  process.env.REACT_APP_CLIENT_SECRET ?? 'dscatalog123';\r\n\r\nconst basicHeader = () => {\r\n  return `Basic ${btoa(`${CLIENT_ID}:${CLIENT_SECRET}`)}`;\r\n};\r\n\r\ntype LoginData = {\r\n  username: string;\r\n  password: string;\r\n};\r\n\r\nexport const requestBackendLogin = (loginData: LoginData) => {\r\n  const headers = {\r\n    'Content-Type': 'application/x-www-form-urlencoded',\r\n    Authorization: basicHeader(),\r\n  };\r\n  const data = qs.stringify({\r\n    ...loginData,\r\n    grant_type: 'password',\r\n  });\r\n\r\n  return axios({\r\n    method: 'POST',\r\n    baseURL: BASE_URL,\r\n    url: '/oauth/token',\r\n    data,\r\n    headers,\r\n  });\r\n};\r\n\r\nexport const saveAuthData = (loginResponse: LoginResponse) => {\r\n  localStorage.setItem('authData', qd.stringify(loginResponse));\r\n};\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,EAAE,MAAM,IAAI;AAYnB,OAAO,MAAMC,QAAQ,IAAAC,qBAAA,GACnBC,OAAO,CAACC,GAAG,CAACC,qBAAqB,cAAAH,qBAAA,cAAAA,qBAAA,GAAI,uBAAuB;AAE9D,OAAO,MAAMI,SAAS,IAAAC,sBAAA,GAAGJ,OAAO,CAACC,GAAG,CAACI,mBAAmB,cAAAD,sBAAA,cAAAA,sBAAA,GAAI,WAAW;AAEvE,OAAO,MAAME,aAAa,IAAAC,sBAAA,GACxBP,OAAO,CAACC,GAAG,CAACO,uBAAuB,cAAAD,sBAAA,cAAAA,sBAAA,GAAI,cAAc;AAEvD,MAAME,WAAW,GAAGA,CAAA,KAAM;EACxB,OAAQ,SAAQC,IAAI,CAAE,GAAEP,SAAU,IAAGG,aAAc,EAAC,CAAE,EAAC;AACzD,CAAC;AAOD,OAAO,MAAMK,mBAAmB,GAAIC,SAAoB,IAAK;EAC3D,MAAMC,OAAO,GAAG;IACd,cAAc,EAAE,mCAAmC;IACnDC,aAAa,EAAEL,WAAW,CAAC;EAC7B,CAAC;EACD,MAAMM,IAAI,GAAGlB,EAAE,CAACmB,SAAS,CAAC;IACxB,GAAGJ,SAAS;IACZK,UAAU,EAAE;EACd,CAAC,CAAC;EAEF,OAAOrB,KAAK,CAAC;IACXsB,MAAM,EAAE,MAAM;IACdC,OAAO,EAAErB,QAAQ;IACjBsB,GAAG,EAAE,cAAc;IACnBL,IAAI;IACJF;EACF,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,MAAMQ,YAAY,GAAIC,aAA4B,IAAK;EAC5DC,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEC,EAAE,CAACT,SAAS,CAACM,aAAa,CAAC,CAAC;AAC/D,CAAC"},"metadata":{},"sourceType":"module"}